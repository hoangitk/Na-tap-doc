import{u as j,Q as F,a as K,b as W,c as U,d as G,e as X}from"./QMenu-DN_q5i6M.js";import{c as z,a as k,h as B,b as M,E as T,g as J,r as q,F as Y,w as R,n as E,G as Z,Q as C,H as ee,I as te,J as ne,K as O,L as g,z as h,M as c,N as L,O as I,P as oe,R as se,S as p,U as x,y as V,V as y,A as _,B as f,W as ae,X as le,C as ie}from"./index-DVIkszVp.js";import{u as re,t as ue,w as ce}from"./position-engine-BviP8Bka.js";import{Q as de,a as fe}from"./QPage-DUkEV9rV.js";import{_ as he}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-dark-5l6pAtmJ.js";import"./use-timeout-OH9yTxJ2.js";const me=z({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:t}){const n=k(()=>{const a=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(i=>e[i]===!0).map(i=>`q-btn-group--${i}`).join(" ");return`q-btn-group row no-wrap${a.length!==0?" "+a:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>B("div",{class:n.value},M(t.default))}}),pe=Object.keys(T);function ge(e){return pe.reduce((t,n)=>{const a=e[n];return a!==void 0&&(t[n]=a),t},{})}const ve=z({name:"QBtnDropdown",props:{...T,...re,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,noRefocus:Boolean,noFocus:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:t,emit:n}){const{proxy:a}=J(),i=q(e.modelValue),v=q(null),S=j(),m=k(()=>{const s={"aria-expanded":i.value===!0?"true":"false","aria-haspopup":"true","aria-controls":S.value,"aria-label":e.toggleAriaLabel||a.$q.lang.label[i.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(s["aria-disabled"]="true"),s}),b=k(()=>"q-btn-dropdown__arrow"+(i.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),r=k(()=>Y(e)),l=k(()=>ge(e));R(()=>e.modelValue,s=>{v.value?.[s?"show":"hide"]()}),R(()=>e.split,Q);function w(s){i.value=!0,n("beforeShow",s)}function $(s){n("show",s),n("update:modelValue",!0)}function d(s){i.value=!1,n("beforeHide",s)}function o(s){n("hide",s),n("update:modelValue",!1)}function u(s){n("click",s)}function D(s){ee(s),Q(),n("click",s)}function P(s){v.value?.toggle(s)}function N(s){v.value?.show(s)}function Q(s){v.value?.hide(s)}return Object.assign(a,{show:N,hide:Q,toggle:P}),E(()=>{e.modelValue===!0&&N()}),()=>{const s=[B(Z,{class:b.value,name:e.dropdownIcon||a.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&s.push(B(F,{ref:v,id:S.value,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noEscDismiss:e.noEscDismiss,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,noFocus:e.noFocus,noRefocus:e.noRefocus,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:w,onShow:$,onBeforeHide:d,onHide:o},t.default)),e.split===!1?B(C,{class:"q-btn-dropdown q-btn-dropdown--simple",...l.value,...m.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:u},{default:()=>M(t.label,[]).concat(s),loading:t.loading}):B(me,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...r.value,glossy:e.glossy,stretch:e.stretch},()=>[B(C,{class:"q-btn-dropdown--current",...l.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:D},{default:t.label,loading:t.loading}),B(C,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...m.value,...r.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>s)])}}}),A=z({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:t}){const n=k(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>B(e.tag,{class:n.value},M(t.default))}});function H(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const t=parseInt(e,10);return isNaN(t)?0:t}const _e=te({name:"close-popup",beforeMount(e,{value:t}){const n={depth:H(t),handler(a){n.depth!==0&&setTimeout(()=>{const i=ue(e);i!==void 0&&ce(i,a,n.depth)})},handlerKey(a){ne(a,13)===!0&&n.handler(a)}};e.__qclosepopup=n,e.addEventListener("click",n.handler),e.addEventListener("keyup",n.handlerKey)},updated(e,{value:t,oldValue:n}){t!==n&&(e.__qclosepopup.depth=H(t))},beforeUnmount(e){const t=e.__qclosepopup;e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup}}),be={key:0,style:{color:"red"}},we={key:1,class:"q-gutter-sm"},ye={key:0,class:"syllable"},Be={key:0,class:"initial-consonant"},Ce={class:"rhyme"},ke={key:1},Se={key:2},qe=O({__name:"HighlightWords",props:{content:{},fontSize:{}},setup(e){const t=e,n=["ngh","ch","gh","kh","nh","ng","ph","th","tr","qu","gi","b","c","d","đ","g","h","k","l","m","n","p","s","r","t","x","v"],a=k(()=>v(t.content)),i=k(()=>t.fontSize??2);function v(m){const b=new RegExp("(\\r\\n|\\n)|(\\p{L}+)|(\\p{N}+)|([^\\p{L}\\p{N}\\s])","gu"),r=[];let l;for(;(l=b.exec(m))!==null;)l[1]?r.push({type:"newline",value:l[1]}):l[2]?r.push({type:"word",value:l[2],syllable:S(l[2])}):l[3]?r.push({type:"number",value:l[3]}):l[4]&&r.push({type:"punctuation",value:l[4]});return r}function S(m){const b=m.toLowerCase();for(const r of n)if(b.startsWith(r))return[m.slice(0,r.length),m.slice(r.length)];return["",m]}return(m,b)=>(h(),g("div",{class:"q-mt-md",style:oe({fontSize:`${c(i)}rem`})},[c(a).length===0?(h(),g("p",be,"Vui lòng nhập đoạn văn!")):(h(),g("div",we,[(h(!0),g(L,null,I(c(a),({type:r,value:l,syllable:w},$)=>(h(),g(L,{key:$},[r==="word"&&w?(h(),g("span",ye,[w[0]?(h(),g("span",Be,x(w[0]),1)):se("",!0),p("span",Ce,x(w[1]),1)])):r==="newline"?(h(),g("br",ke)):(h(),g("span",Se,x(l),1))],64))),128))]))],4))}}),xe=he(qe,[["__scopeId","data-v-2427ac82"]]),$e={class:"row justify-between q-gutter-y-md"},De={class:"col-auto"},Le={class:"items-center q-gutter-sm"},Qe={class:"col-auto"},Ve={class:"row items-center q-gutter-sm"},Ae={class:"text-caption"},Ie={class:"text-h6"},ze={class:"q-gutter-sm"},Oe=O({__name:"IndexPage",setup(e){const t=q(""),n=q(2),a=q([]),i=q(0),v=q([]),S=({title:d,content:o})=>`${d}

${o}`;async function m(d){const o=await y.lessons.get(d);o&&l(S(o))}async function b(){const d=await y.sentences.count(),o=Math.floor(Math.random()*d),[u]=await y.sentences.offset(o).limit(1).toArray();l(u?.sentence)}async function r(){const d=await y.lessons.count(),o=Math.floor(Math.random()*d);console.log(o);const[u]=await y.lessons.offset(o).limit(1).toArray();l(S(u))}function l(d=""){t.value=d}async function w(){const d=await y.sentences.limit(22).toArray();a.value=d?.map(o=>o.sentence),i.value=await y.sentences.count()}async function $(){await y.lessons.each(({id:d,title:o})=>{v.value.push({id:d,title:o})})}return E(()=>{w(),$()}),(d,o)=>(h(),V(de,null,{default:_(()=>[f(fe,{class:"q-ma-md"},{default:_(()=>[f(A,null,{default:_(()=>[o[4]||(o[4]=p("h1",{class:"text-h4 text-orange-9"},"Bé tập đọc Tiếng Việt",-1)),o[5]||(o[5]=p("p",null,"Nhập đoạn văn để bé tập học cách tách âm tiết!",-1)),f(K,{modelValue:c(t),"onUpdate:modelValue":o[0]||(o[0]=u=>ae(t)?t.value=u:null),type:"textarea",placeholder:"Nhập câu, ví dụ: Na rất thích Tiếng Việt.",outlined:"",class:"input q-mb-md",rows:3},null,8,["modelValue"]),p("div",$e,[p("div",De,[p("div",Le,[f(c(C),{label:"Câu ngẫu nhiên",color:"primary",onClick:b}),f(c(C),{label:"Xóa đoạn văn",onClick:o[1]||(o[1]=u=>t.value="")}),f(ve,{color:"purple",split:"",label:"Bài học ngẫu nhiên",onClick:r},{default:_(()=>[f(W,null,{default:_(()=>[(h(!0),g(L,null,I(c(v),({id:u,title:D})=>le((h(),V(U,{key:u,clickable:"",onClick:P=>m(u)},{default:_(()=>[f(G,null,{default:_(()=>[f(X,null,{default:_(()=>[ie(x(D),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[_e]])),128))]),_:1})]),_:1})])]),p("div",Qe,[p("div",Ve,[f(c(C),{label:"-",size:"small",onClick:o[2]||(o[2]=u=>n.value=Math.max(c(n)*.9,1))}),p("div",Ae,"Kích thước chữ: "+x(c(n).toFixed(1))+"x",1),f(c(C),{label:"+",size:"small",onClick:o[3]||(o[3]=u=>n.value=Math.min(c(n)*1.1,3))})])])]),f(A,null,{default:_(()=>[f(xe,{content:c(t),fontSize:c(n)},null,8,["content","fontSize"])]),_:1}),f(A,null,{default:_(()=>[p("h3",Ie,"Câu mẫu (top 22) / "+x(c(i))+":",1),p("div",ze,[(h(!0),g(L,null,I(c(a),u=>(h(),V(c(C),{key:u,style:{"text-transform":"none"},color:"secondary",rounded:"",label:u,onClick:D=>l(u)},null,8,["label","onClick"]))),128))])]),_:1})]),_:1,__:[4,5]})]),_:1})]),_:1}))}});export{Oe as default};
