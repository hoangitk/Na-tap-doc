import{u as W,Q as G,a as X,b as J,c as Y,d as Z,e as ee,f as te}from"./QToggle-I4AMdym3.js";import{c as z,a as y,h as _,b as T,E as O,g as ne,r as q,F as oe,w as I,n as j,G as se,Q as B,H as ae,I as le,J as ie,K as A,L as p,z as h,M as d,N as C,O as L,P as re,R as P,S as R,U as b,V as k,W as E,y as D,X as ue,A as w,B as m,Y as M,Z as ce,C as de,_ as fe}from"./index-DjXhvKy8.js";import{u as he,t as me,w as pe}from"./position-engine-DJMpqQTz.js";import{Q as ge,a as ve}from"./QPage-ChQhOAyf.js";import{u as be,p as we,a as _e,l as H,r as ye}from"./quasar.client-BR0WFZPD.js";import"./use-dark-DGo-P7Lo.js";import"./use-timeout-DJsAEwm-.js";const Be=z({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:o}){const t=y(()=>{const i=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(u=>e[u]===!0).map(u=>`q-btn-group--${u}`).join(" ");return`q-btn-group row no-wrap${i.length!==0?" "+i:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>_("div",{class:t.value},T(o.default))}}),ke=Object.keys(O);function Ce(e){return ke.reduce((o,t)=>{const i=e[t];return i!==void 0&&(o[t]=i),o},{})}const Se=z({name:"QBtnDropdown",props:{...O,...he,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,noRefocus:Boolean,noFocus:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:o,emit:t}){const{proxy:i}=ne(),u=q(e.modelValue),v=q(null),c=W(),g=y(()=>{const s={"aria-expanded":u.value===!0?"true":"false","aria-haspopup":"true","aria-controls":c.value,"aria-label":e.toggleAriaLabel||i.$q.lang.label[u.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(s["aria-disabled"]="true"),s}),a=y(()=>"q-btn-dropdown__arrow"+(u.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),r=y(()=>oe(e)),l=y(()=>Ce(e));I(()=>e.modelValue,s=>{v.value?.[s?"show":"hide"]()}),I(()=>e.split,Q);function n(s){u.value=!0,t("beforeShow",s)}function f(s){t("show",s),t("update:modelValue",!0)}function S(s){u.value=!1,t("beforeHide",s)}function x(s){t("hide",s),t("update:modelValue",!1)}function $(s){t("click",s)}function K(s){ae(s),Q(),t("click",s)}function U(s){v.value?.toggle(s)}function N(s){v.value?.show(s)}function Q(s){v.value?.hide(s)}return Object.assign(i,{show:N,hide:Q,toggle:U}),j(()=>{e.modelValue===!0&&N()}),()=>{const s=[_(se,{class:a.value,name:e.dropdownIcon||i.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&s.push(_(G,{ref:v,id:c.value,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noEscDismiss:e.noEscDismiss,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,noFocus:e.noFocus,noRefocus:e.noRefocus,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:n,onShow:f,onBeforeHide:S,onHide:x},o.default)),e.split===!1?_(B,{class:"q-btn-dropdown q-btn-dropdown--simple",...l.value,...g.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:$},{default:()=>T(o.label,[]).concat(s),loading:o.loading}):_(Be,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...r.value,glossy:e.glossy,stretch:e.stretch},()=>[_(B,{class:"q-btn-dropdown--current",...l.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:K},{default:o.label,loading:o.loading}),_(B,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...g.value,...r.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>s)])}}}),V=z({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:o}){const t=y(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>_(e.tag,{class:t.value},T(o.default))}});function F(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const o=parseInt(e,10);return isNaN(o)?0:o}const qe=le({name:"close-popup",beforeMount(e,{value:o}){const t={depth:F(o),handler(i){t.depth!==0&&setTimeout(()=>{const u=me(e);u!==void 0&&pe(u,i,t.depth)})},handlerKey(i){ie(i,13)===!0&&t.handler(i)}};e.__qclosepopup=t,e.addEventListener("click",t.handler),e.addEventListener("keyup",t.handlerKey)},updated(e,{value:o,oldValue:t}){o!==t&&(e.__qclosepopup.depth=F(o))},beforeUnmount(e){const o=e.__qclosepopup;e.removeEventListener("click",o.handler),e.removeEventListener("keyup",o.handlerKey),delete e.__qclosepopup}}),xe={key:0,style:{color:"red"}},Le={key:0,class:"vocabulary word"},$e={key:0,class:"initial-consonant"},Qe={class:"rhyme"},Ve={key:1,class:"vocabulary number"},De={key:2,class:"punctuation"},ze={key:3,class:"newline"},Te=A({__name:"HighlightWords",props:{content:{default:""},fontSize:{default:2},highlight:{type:Boolean,default:!0}},setup(e){const o=["ngh","ch","gh","kh","nh","ng","ph","th","tr","qu","gi","b","c","d","đ","g","h","k","l","m","n","p","s","r","t","x","v"],t=y(()=>i(e.content));function i(c){const g=new RegExp("(\\r\\n|\\n)|(\\p{L}+)|(\\p{N}+)|([^\\p{L}\\p{N}\\s])","gu"),a=[];let r;for(;(r=g.exec(c))!==null;)r[1]?a.push({type:"newline",value:r[1]}):r[2]?a.push({type:"word",value:r[2],syllable:u(r[2])}):r[3]?a.push({type:"number",value:r[3],groups:v(r[3])}):r[4]&&a.push({type:"punctuation",value:r[4]});return a}function u(c){const g=c.toLowerCase();for(const a of o)if(g.startsWith(a))return[c.slice(0,a.length),c.slice(a.length)];return["",c]}function v(c){return c.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ").split(" ").reverse().map((r,l)=>({group:l,value:r})).reverse()}return(c,g)=>(h(),p("div",{class:P(["highlight-words q-mt-md",{highlight:c.highlight}]),style:re({"--font-size":`${c.fontSize}rem`})},[d(t).length===0?(h(),p("p",xe,"Vui lòng nhập đoạn văn!")):(h(!0),p(C,{key:1},L(d(t),({type:a,value:r,syllable:l,groups:n},f)=>(h(),p(C,{key:f},[a==="word"&&l?(h(),p("span",Le,[l[0]?(h(),p("span",$e,k(l[0]),1)):R("",!0),b("span",Qe,k(l[1]),1)])):a==="number"?(h(),p("span",Ve,[(h(!0),p(C,null,L(n,({group:S,value:x},$)=>(h(),p("span",{key:$,class:P(`number__group-${S}`)},k(x),3))),128))])):a==="punctuation"?(h(),p("span",De,k(r),1)):a==="newline"?(h(),p("br",ze)):R("",!0)],64))),128))],6))}}),Ae={class:"text-h6"},Ne={class:"q-gutter-sm"},Ie=A({__name:"SentencesTags",props:{top:Number},emits:["tag-click"],setup(e,{emit:o}){const t=e,i=o,u=y(()=>t.top||20),v=E(async a=>(await a.sentences.limit(u.value).toArray()).map(l=>l.sentence)),c=E(a=>a.sentences.count());function g(a){i("tag-click",a)}return(a,r)=>(h(),p(C,null,[b("h3",Ae,"Câu mẫu (top "+k(d(u))+") / "+k(d(c))+":",1),b("div",Ne,[(h(!0),p(C,null,L(d(v),l=>(h(),D(B,{key:l,style:{"text-transform":"none"},color:"secondary",rounded:"",label:l,onClick:n=>g({originalEvent:n,sentence:l})},null,8,["label","onClick"]))),128))])],64))}}),Pe={class:"row justify-between q-gutter-y-md"},Re={class:"col-auto"},Ee={class:"items-center q-gutter-sm"},Me={class:"col-auto"},He={class:"row items-center q-gutter-sm"},Fe={class:"text-caption"},Je=A({__name:"IndexPage",setup(e){const o=_e(),t=q(""),i=q(2),u=q(!0),v=be();async function c(l){const n=await fe.lessons.get(l);n&&r(H(n))}async function g(){const l=await ue();r(l?.sentence)}async function a(){const l=await ye();r(H(l))}function r(l=""){t.value=l}return j(()=>{we().then(([l,n])=>{l&&o.notify({type:"positive",message:n})}),g()}),(l,n)=>(h(),D(ge,null,{default:w(()=>[m(ve,{class:"q-ma-md"},{default:w(()=>[m(V,null,{default:w(()=>[n[8]||(n[8]=b("h1",{class:"text-h4 text-orange-9"},"Bé tập đọc Tiếng Việt",-1)),n[9]||(n[9]=b("p",null,"Nhập đoạn văn để bé tập học cách tách âm tiết!",-1)),m(X,{modelValue:d(t),"onUpdate:modelValue":n[0]||(n[0]=f=>M(t)?t.value=f:null),type:"textarea",placeholder:"Nhập câu, ví dụ: Na rất thích Tiếng Việt.",outlined:"",class:"input q-mb-md",rows:3},null,8,["modelValue"]),b("div",Pe,[b("div",Re,[b("div",Ee,[m(d(B),{label:"Câu ngẫu nhiên",color:"primary",onClick:n[1]||(n[1]=f=>g())}),m(Se,{color:"purple",split:"",label:"Bài học ngẫu nhiên",onClick:n[2]||(n[2]=f=>a())},{default:w(()=>[m(J,null,{default:w(()=>[(h(!0),p(C,null,L(d(v),({id:f,title:S})=>ce((h(),D(Y,{key:f,clickable:"",onClick:x=>c(f)},{default:w(()=>[m(Z,null,{default:w(()=>[m(ee,null,{default:w(()=>[de(k(S),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[qe]])),128))]),_:1})]),_:1}),m(d(B),{label:"Xóa đoạn văn",onClick:n[3]||(n[3]=f=>t.value="")}),m(te,{modelValue:d(u),"onUpdate:modelValue":n[4]||(n[4]=f=>M(u)?u.value=f:null),label:"Tách âm tiết"},null,8,["modelValue"])])]),b("div",Me,[b("div",He,[m(d(B),{label:"-",size:"small",onClick:n[5]||(n[5]=f=>i.value=Math.max(d(i)*.9,1))}),b("div",Fe,"Kích thước chữ: "+k(d(i).toFixed(1))+"x",1),m(d(B),{label:"+",size:"small",onClick:n[6]||(n[6]=f=>i.value=Math.min(d(i)*1.1,3))})])])]),m(V,null,{default:w(()=>[m(Te,{content:d(t),fontSize:d(i),highlight:d(u)},null,8,["content","fontSize","highlight"])]),_:1}),m(V,null,{default:w(()=>[m(Ie,{top:20,onTagClick:n[7]||(n[7]=({sentence:f})=>r(f))})]),_:1})]),_:1,__:[8,9]})]),_:1})]),_:1}))}});export{Je as default};
