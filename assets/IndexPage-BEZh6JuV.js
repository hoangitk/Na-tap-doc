import{u as O,Q as j,a as K,b as W,c as U,d as G,e as X}from"./index-BV6xLACv.js";import{c as Q,a as w,h as y,b as V,E,g as J,r as C,F as Y,w as T,n as z,G as Z,Q as B,H as ee,I as te,J as ne,K as A,L as g,z as d,M as u,N as S,O as I,P as oe,R as se,S as _,U as k,V as $,y as D,A as v,B as c,W as ae,X as le,C as ie,Y as re}from"./index-Cvz5Ccp4.js";import{u as ue,t as ce,w as de}from"./position-engine-CzUD-uH6.js";import{Q as fe,a as me}from"./QPage-CGyzMTL2.js";import{_ as he}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as pe,p as ge,a as _e,r as ve}from"./quasar.client-C5-LLybb.js";import"./use-dark-izOP0xig.js";import"./use-timeout-6u9RgOln.js";const be=Q({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:o}){const t=w(()=>{const l=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(r=>e[r]===!0).map(r=>`q-btn-group--${r}`).join(" ");return`q-btn-group row no-wrap${l.length!==0?" "+l:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>y("div",{class:t.value},V(o.default))}}),we=Object.keys(E);function ye(e){return we.reduce((o,t)=>{const l=e[t];return l!==void 0&&(o[t]=l),o},{})}const Be=Q({name:"QBtnDropdown",props:{...E,...ue,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,noRefocus:Boolean,noFocus:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:o,emit:t}){const{proxy:l}=J(),r=C(e.modelValue),m=C(null),b=O(),f=w(()=>{const a={"aria-expanded":r.value===!0?"true":"false","aria-haspopup":"true","aria-controls":b.value,"aria-label":e.toggleAriaLabel||l.$q.lang.label[r.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(a["aria-disabled"]="true"),a}),h=w(()=>"q-btn-dropdown__arrow"+(r.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),i=w(()=>Y(e)),n=w(()=>ye(e));T(()=>e.modelValue,a=>{m.value?.[a?"show":"hide"]()}),T(()=>e.split,x);function s(a){r.value=!0,t("beforeShow",a)}function p(a){t("show",a),t("update:modelValue",!0)}function q(a){r.value=!1,t("beforeHide",a)}function N(a){t("hide",a),t("update:modelValue",!1)}function H(a){t("click",a)}function M(a){ee(a),x(),t("click",a)}function F(a){m.value?.toggle(a)}function P(a){m.value?.show(a)}function x(a){m.value?.hide(a)}return Object.assign(l,{show:P,hide:x,toggle:F}),z(()=>{e.modelValue===!0&&P()}),()=>{const a=[y(Z,{class:h.value,name:e.dropdownIcon||l.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&a.push(y(j,{ref:m,id:b.value,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noEscDismiss:e.noEscDismiss,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,noFocus:e.noFocus,noRefocus:e.noRefocus,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:s,onShow:p,onBeforeHide:q,onHide:N},o.default)),e.split===!1?y(B,{class:"q-btn-dropdown q-btn-dropdown--simple",...n.value,...f.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:H},{default:()=>V(o.label,[]).concat(a),loading:o.loading}):y(be,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...i.value,glossy:e.glossy,stretch:e.stretch},()=>[y(B,{class:"q-btn-dropdown--current",...n.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:M},{default:o.label,loading:o.loading}),y(B,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...f.value,...i.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>a)])}}}),L=Q({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:o}){const t=w(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>y(e.tag,{class:t.value},V(o.default))}});function R(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const o=parseInt(e,10);return isNaN(o)?0:o}const ke=te({name:"close-popup",beforeMount(e,{value:o}){const t={depth:R(o),handler(l){t.depth!==0&&setTimeout(()=>{const r=ce(e);r!==void 0&&de(r,l,t.depth)})},handlerKey(l){ne(l,13)===!0&&t.handler(l)}};e.__qclosepopup=t,e.addEventListener("click",t.handler),e.addEventListener("keyup",t.handlerKey)},updated(e,{value:o,oldValue:t}){o!==t&&(e.__qclosepopup.depth=R(o))},beforeUnmount(e){const o=e.__qclosepopup;e.removeEventListener("click",o.handler),e.removeEventListener("keyup",o.handlerKey),delete e.__qclosepopup}}),Ce={key:0,style:{color:"red"}},Se={key:1,class:"q-gutter-sm"},qe={key:0,class:"syllable"},xe={key:0,class:"initial-consonant"},Le={class:"rhyme"},$e={key:1},De={key:2},Qe=A({__name:"HighlightWords",props:{content:{},fontSize:{}},setup(e){const o=e,t=["ngh","ch","gh","kh","nh","ng","ph","th","tr","qu","gi","b","c","d","đ","g","h","k","l","m","n","p","s","r","t","x","v"],l=w(()=>m(o.content)),r=w(()=>o.fontSize??2);function m(f){const h=new RegExp("(\\r\\n|\\n)|(\\p{L}+)|(\\p{N}+)|([^\\p{L}\\p{N}\\s])","gu"),i=[];let n;for(;(n=h.exec(f))!==null;)n[1]?i.push({type:"newline",value:n[1]}):n[2]?i.push({type:"word",value:n[2],syllable:b(n[2])}):n[3]?i.push({type:"number",value:n[3]}):n[4]&&i.push({type:"punctuation",value:n[4]});return i}function b(f){const h=f.toLowerCase();for(const i of t)if(h.startsWith(i))return[f.slice(0,i.length),f.slice(i.length)];return["",f]}return(f,h)=>(d(),g("div",{class:"q-mt-md",style:oe({fontSize:`${u(r)}rem`})},[u(l).length===0?(d(),g("p",Ce,"Vui lòng nhập đoạn văn!")):(d(),g("div",Se,[(d(!0),g(S,null,I(u(l),({type:i,value:n,syllable:s},p)=>(d(),g(S,{key:p},[i==="word"&&s?(d(),g("span",qe,[s[0]?(d(),g("span",xe,k(s[0]),1)):se("",!0),_("span",Le,k(s[1]),1)])):i==="newline"?(d(),g("br",$e)):(d(),g("span",De,k(n),1))],64))),128))]))],4))}}),Ve=he(Qe,[["__scopeId","data-v-2427ac82"]]),ze={class:"text-h6"},Ae={class:"q-gutter-sm"},Ie=A({__name:"SentencesTags",props:{top:Number},emits:["tag-click"],setup(e,{emit:o}){const t=e,l=o,r=C(0),m=C([]),b=w(()=>t.top||20);function f(h){l("tag-click",h)}return z(async()=>{const h=await $.sentences.limit(b.value).toArray();m.value=h?.map(i=>i.sentence),r.value=await $.sentences.count()}),(h,i)=>(d(),g(S,null,[_("h3",ze,"Câu mẫu (top "+k(u(b))+") / "+k(u(r))+":",1),_("div",Ae,[(d(!0),g(S,null,I(u(m),n=>(d(),D(B,{key:n,style:{"text-transform":"none"},color:"secondary",rounded:"",label:n,onClick:s=>f({originalEvent:s,sentence:n})},null,8,["label","onClick"]))),128))])],64))}}),Ne={class:"row justify-between q-gutter-y-md"},Pe={class:"col-auto"},Te={class:"items-center q-gutter-sm"},Re={class:"col-auto"},Ee={class:"row items-center q-gutter-sm"},He={class:"text-caption"},Xe=A({__name:"IndexPage",setup(e){const o=_e(),t=C(""),l=C(2),r=pe(),m=({title:n,content:s})=>`${n}

${s}`;async function b(n){const s=await $.lessons.get(n);s&&i(m(s))}async function f(){const n=await re();i(n?.sentence)}async function h(){const n=await ve();i(m(n))}function i(n=""){t.value=n}return z(()=>{ge().then(([n,s])=>{n&&o.notify({type:"positive",message:s})})}),(n,s)=>(d(),D(fe,null,{default:v(()=>[c(me,{class:"q-ma-md"},{default:v(()=>[c(L,null,{default:v(()=>[s[5]||(s[5]=_("h1",{class:"text-h4 text-orange-9"},"Bé tập đọc Tiếng Việt",-1)),s[6]||(s[6]=_("p",null,"Nhập đoạn văn để bé tập học cách tách âm tiết!",-1)),c(K,{modelValue:u(t),"onUpdate:modelValue":s[0]||(s[0]=p=>ae(t)?t.value=p:null),type:"textarea",placeholder:"Nhập câu, ví dụ: Na rất thích Tiếng Việt.",outlined:"",class:"input q-mb-md",rows:3},null,8,["modelValue"]),_("div",Ne,[_("div",Pe,[_("div",Te,[c(u(B),{label:"Câu ngẫu nhiên",color:"primary",onClick:f}),c(u(B),{label:"Xóa đoạn văn",onClick:s[1]||(s[1]=p=>t.value="")}),c(Be,{color:"purple",split:"",label:"Bài học ngẫu nhiên",onClick:h},{default:v(()=>[c(W,null,{default:v(()=>[(d(!0),g(S,null,I(u(r),({id:p,title:q})=>le((d(),D(U,{key:p,clickable:"",onClick:N=>b(p)},{default:v(()=>[c(G,null,{default:v(()=>[c(X,null,{default:v(()=>[ie(k(q),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[ke]])),128))]),_:1})]),_:1})])]),_("div",Re,[_("div",Ee,[c(u(B),{label:"-",size:"small",onClick:s[2]||(s[2]=p=>l.value=Math.max(u(l)*.9,1))}),_("div",He,"Kích thước chữ: "+k(u(l).toFixed(1))+"x",1),c(u(B),{label:"+",size:"small",onClick:s[3]||(s[3]=p=>l.value=Math.min(u(l)*1.1,3))})])])]),c(L,null,{default:v(()=>[c(Ve,{content:u(t),fontSize:u(l)},null,8,["content","fontSize"])]),_:1}),c(L,null,{default:v(()=>[c(Ie,{top:20,onTagClick:s[4]||(s[4]=({sentence:p})=>i(p))})]),_:1})]),_:1,__:[5,6]})]),_:1})]),_:1}))}});export{Xe as default};
